/*
 * Generated by the Jasper component of Apache Tomcat
 * Version: jetty/12.0.6
 * Generated at: 2026-01-20 14:54:21 UTC
 * Note: The last modified time of this file was set to
 *       the last modified time of the source file after
 *       generation to assist with modification tracking.
 */
package org.apache.jsp;

import jakarta.servlet.*;
import jakarta.servlet.http.*;
import jakarta.servlet.jsp.*;
import java.sql.*;
import model.Employee;

public final class ReviewClaim_jsp extends org.apache.jasper.runtime.HttpJspBase
    implements org.apache.jasper.runtime.JspSourceDependent,
                 org.apache.jasper.runtime.JspSourceImports,
                 org.apache.jasper.runtime.JspSourceDirectives {

  private static final jakarta.servlet.jsp.JspFactory _jspxFactory =
          jakarta.servlet.jsp.JspFactory.getDefaultFactory();

  private static java.util.Map<java.lang.String,java.lang.Long> _jspx_dependants;

  private static final java.util.Set<java.lang.String> _jspx_imports_packages;

  private static final java.util.Set<java.lang.String> _jspx_imports_classes;

  static {
    _jspx_imports_packages = new java.util.HashSet<>();
    _jspx_imports_packages.add("java.sql");
    _jspx_imports_packages.add("jakarta.servlet");
    _jspx_imports_packages.add("jakarta.servlet.http");
    _jspx_imports_packages.add("jakarta.servlet.jsp");
    _jspx_imports_classes = new java.util.HashSet<>();
    _jspx_imports_classes.add("model.Employee");
  }

  private volatile jakarta.el.ExpressionFactory _el_expressionfactory;
  private volatile org.apache.tomcat.InstanceManager _jsp_instancemanager;

  public java.util.Map<java.lang.String,java.lang.Long> getDependants() {
    return _jspx_dependants;
  }

  public java.util.Set<java.lang.String> getPackageImports() {
    return _jspx_imports_packages;
  }

  public java.util.Set<java.lang.String> getClassImports() {
    return _jspx_imports_classes;
  }

  public boolean getErrorOnELNotFound() {
    return false;
  }

  public jakarta.el.ExpressionFactory _jsp_getExpressionFactory() {
    if (_el_expressionfactory == null) {
      synchronized (this) {
        if (_el_expressionfactory == null) {
          _el_expressionfactory = _jspxFactory.getJspApplicationContext(getServletConfig().getServletContext()).getExpressionFactory();
        }
      }
    }
    return _el_expressionfactory;
  }

  public org.apache.tomcat.InstanceManager _jsp_getInstanceManager() {
    if (_jsp_instancemanager == null) {
      synchronized (this) {
        if (_jsp_instancemanager == null) {
          _jsp_instancemanager = org.apache.jasper.runtime.InstanceManagerFactory.getInstanceManager(getServletConfig());
        }
      }
    }
    return _jsp_instancemanager;
  }

  public void _jspInit() {
  }

  public void _jspDestroy() {
  }

  public void _jspService(final jakarta.servlet.http.HttpServletRequest request, final jakarta.servlet.http.HttpServletResponse response)
      throws java.io.IOException, jakarta.servlet.ServletException {

    if (!jakarta.servlet.DispatcherType.ERROR.equals(request.getDispatcherType())) {
      final java.lang.String _jspx_method = request.getMethod();
      if ("OPTIONS".equals(_jspx_method)) {
        response.setHeader("Allow","GET, HEAD, POST, OPTIONS");
        return;
      }
      if (!"GET".equals(_jspx_method) && !"POST".equals(_jspx_method) && !"HEAD".equals(_jspx_method)) {
        response.setHeader("Allow","GET, HEAD, POST, OPTIONS");
        response.sendError(HttpServletResponse.SC_METHOD_NOT_ALLOWED, "JSPs only permit GET, POST or HEAD. Jasper also permits OPTIONS");
        return;
      }
    }

    final jakarta.servlet.jsp.PageContext pageContext;
    jakarta.servlet.http.HttpSession session = null;
    final jakarta.servlet.ServletContext application;
    final jakarta.servlet.ServletConfig config;
    jakarta.servlet.jsp.JspWriter out = null;
    final java.lang.Object page = this;
    jakarta.servlet.jsp.JspWriter _jspx_out = null;
    jakarta.servlet.jsp.PageContext _jspx_page_context = null;


    try {
      response.setContentType("text/html");
      pageContext = _jspxFactory.getPageContext(this, request, response,
      			null, true, 8192, true);
      _jspx_page_context = pageContext;
      application = pageContext.getServletContext();
      config = pageContext.getServletConfig();
      session = pageContext.getSession();
      out = pageContext.getOut();
      _jspx_out = out;

      out.write("\r\n");
      out.write("    \r\n");
      out.write("        \r\n");
      out.write("\r\n");
      out.write("            ");
 Employee currentUser=(Employee) session.getAttribute("employee"); if (currentUser==null) {
                response.sendRedirect("Login.jsp"); return; } if (!"Manager".equalsIgnoreCase(currentUser.getRole())) {
                response.sendRedirect("AccessDenied.jsp"); return; } String submissionId=request.getParameter("id"); if
                (submissionId==null) { response.sendRedirect("ManagerSubmissionList.jsp"); return; } String
                dbURL="jdbc:postgresql://localhost:5432/eems" ; String dbUser="postgres" ; String dbPass="oracle" ;
                Connection conn=null; PreparedStatement ps=null; ResultSet rs=null; 
      out.write("\r\n");
      out.write("\r\n");
      out.write("                <!DOCTYPE html>\r\n");
      out.write("                <html lang=\"en\">\r\n");
      out.write("\r\n");
      out.write("                <head>\r\n");
      out.write("                    <meta charset=\"UTF-8\">\r\n");
      out.write("                    <title>Review Claim | EEMS</title>\r\n");
      out.write("                    <link rel=\"stylesheet\" href=\"CSS/ReviewClaim.css\">\r\n");
      out.write("                    <link rel=\"stylesheet\"\r\n");
      out.write("                        href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css\">\r\n");
      out.write("                </head>\r\n");
      out.write("\r\n");
      out.write("                <body>\r\n");
      out.write("\r\n");
      out.write("                    <div class=\"page-container\">\r\n");
      out.write("\r\n");
      out.write("                        <div class=\"header-container\">\r\n");
      out.write("                            <div>\r\n");
      out.write("                                <h2>Review Submission #");
      out.print( submissionId );
      out.write("\r\n");
      out.write("                                </h2>\r\n");
      out.write("                                <p>Please review the details below before approving.</p>\r\n");
      out.write("                            </div>\r\n");
      out.write("                            <a href=\"ManagerSubmissionList.jsp\" class=\"btn btn-back\">\r\n");
      out.write("                                <i class=\"fa-solid fa-arrow-left\"></i> Back\r\n");
      out.write("                            </a>\r\n");
      out.write("                        </div>\r\n");
      out.write("\r\n");
      out.write("                        ");
 try { Class.forName("org.postgresql.Driver"); conn=DriverManager.getConnection(dbURL, dbUser,
                            dbPass); String sql="SELECT s.*, e.NAME as EMP_NAME, "
                            + "m.CLINICNAME, m.DIAGNOSIS, m.MRNDOCTOR, " + "o.HOURS, o.STARTTIME, o.ENDTIME, "
                            + "t.MILEAGE, t.DEPARTUREDEST, t.ARRIVALDEST " + "FROM SUBMISSION s "
                            + "JOIN EMPLOYEE e ON s.EMPLOYEEID = e.EMPLOYEEID "
                            + "LEFT JOIN MEDICAL m ON s.SUBMISSIONID = m.SUBMISSIONID "
                            + "LEFT JOIN OVERTIME o ON s.SUBMISSIONID = o.SUBMISSIONID "
                            + "LEFT JOIN TRAVEL t ON s.SUBMISSIONID = t.SUBMISSIONID " + "WHERE s.SUBMISSIONID = ?" ;
                            ps=conn.prepareStatement(sql); ps.setInt(1, Integer.parseInt(submissionId));
                            rs=ps.executeQuery(); if (!rs.next()) { 
      out.write("\r\n");
      out.write("                            <div class=\"review-card\" style=\"text-align: center; color: #D32F2F;\">\r\n");
      out.write("                                <h3><i class=\"fa-solid fa-triangle-exclamation\"></i> Claim Not Found</h3>\r\n");
      out.write("                                <p>The claim ID #");
      out.print( submissionId );
      out.write(" does not exist.</p>\r\n");
      out.write("                                <br>\r\n");
      out.write("                                <a href=\"ManagerSubmissionList.jsp\" class=\"btn btn-back\">Return to Dashboard</a>\r\n");
      out.write("                            </div>\r\n");
      out.write("                            ");
 } else { String type=rs.getString("CLAIMTYPE"); String status=rs.getString("STATUS");
                                String doc=rs.getString("DOCUMENT_PATH"); 
      out.write("\r\n");
      out.write("\r\n");
      out.write("                                <div class=\"review-card\">\r\n");
      out.write("\r\n");
      out.write("                                    <div class=\"section-title\"><i class=\"fa-regular fa-id-card\"></i> Applicant\r\n");
      out.write("                                        Information</div>\r\n");
      out.write("                                    <div class=\"info-grid\">\r\n");
      out.write("                                        <div class=\"info-item\">\r\n");
      out.write("                                            <label>Employee Name</label>\r\n");
      out.write("                                            <div class=\"value\">\r\n");
      out.write("                                                ");
      out.print( rs.getString("EMP_NAME") );
      out.write("\r\n");
      out.write("                                            </div>\r\n");
      out.write("                                        </div>\r\n");
      out.write("                                        <div class=\"info-item\">\r\n");
      out.write("                                            <label>Submission Date</label>\r\n");
      out.write("                                            <div class=\"value\">\r\n");
      out.write("                                                ");
      out.print( rs.getDate("SUBMISSIONDATE") );
      out.write("\r\n");
      out.write("                                            </div>\r\n");
      out.write("                                        </div>\r\n");
      out.write("                                    </div>\r\n");
      out.write("\r\n");
      out.write("                                    <div class=\"section-title\"><i class=\"fa-solid fa-list-check\"></i>\r\n");
      out.write("                                        ");
      out.print( type );
      out.write(" Details\r\n");
      out.write("                                    </div>\r\n");
      out.write("                                    <div class=\"info-grid\">\r\n");
      out.write("\r\n");
      out.write("                                        ");
 if ("Travel".equalsIgnoreCase(type)) { 
      out.write("\r\n");
      out.write("                                            <div class=\"info-item\">\r\n");
      out.write("                                                <label>From</label>\r\n");
      out.write("                                                <div class=\"value\">\r\n");
      out.write("                                                    ");
      out.print( rs.getString("DEPARTUREDEST") );
      out.write("\r\n");
      out.write("                                                </div>\r\n");
      out.write("                                            </div>\r\n");
      out.write("                                            <div class=\"info-item\">\r\n");
      out.write("                                                <label>To</label>\r\n");
      out.write("                                                <div class=\"value\">\r\n");
      out.write("                                                    ");
      out.print( rs.getString("ARRIVALDEST") );
      out.write("\r\n");
      out.write("                                                </div>\r\n");
      out.write("                                            </div>\r\n");
      out.write("                                            <div class=\"info-item\">\r\n");
      out.write("                                                <label>Total Distance</label>\r\n");
      out.write("                                                <div class=\"value\">\r\n");
      out.write("                                                    ");
      out.print( rs.getDouble("MILEAGE") );
      out.write(" KM\r\n");
      out.write("                                                </div>\r\n");
      out.write("                                            </div>\r\n");
      out.write("                                            ");
 } else if ("Medical".equalsIgnoreCase(type)) { 
      out.write("\r\n");
      out.write("                                                <div class=\"info-item\">\r\n");
      out.write("                                                    <label>Clinic Name</label>\r\n");
      out.write("                                                    <div class=\"value\">\r\n");
      out.write("                                                        ");
      out.print( rs.getString("CLINICNAME") );
      out.write("\r\n");
      out.write("                                                    </div>\r\n");
      out.write("                                                </div>\r\n");
      out.write("                                                <div class=\"info-item\">\r\n");
      out.write("                                                    <label>Doctor</label>\r\n");
      out.write("                                                    <div class=\"value\">\r\n");
      out.write("                                                        ");
      out.print( rs.getString("MRNDOCTOR") );
      out.write("\r\n");
      out.write("                                                    </div>\r\n");
      out.write("                                                </div>\r\n");
      out.write("                                                <div class=\"info-item full-width\">\r\n");
      out.write("                                                    <label>Diagnosis</label>\r\n");
      out.write("                                                    <div class=\"value\">\r\n");
      out.write("                                                        ");
      out.print( rs.getString("DIAGNOSIS") );
      out.write("\r\n");
      out.write("                                                    </div>\r\n");
      out.write("                                                </div>\r\n");
      out.write("                                                ");
 } else if ("Overtime".equalsIgnoreCase(type)) { 
      out.write("\r\n");
      out.write("                                                    <div class=\"info-item\">\r\n");
      out.write("                                                        <label>Start Time</label>\r\n");
      out.write("                                                        <div class=\"value\">\r\n");
      out.write("                                                            ");
      out.print( rs.getTimestamp("STARTTIME") );
      out.write("\r\n");
      out.write("                                                        </div>\r\n");
      out.write("                                                    </div>\r\n");
      out.write("                                                    <div class=\"info-item\">\r\n");
      out.write("                                                        <label>End Time</label>\r\n");
      out.write("                                                        <div class=\"value\">\r\n");
      out.write("                                                            ");
      out.print( rs.getTimestamp("ENDTIME") );
      out.write("\r\n");
      out.write("                                                        </div>\r\n");
      out.write("                                                    </div>\r\n");
      out.write("                                                    <div class=\"info-item\">\r\n");
      out.write("                                                        <label>Total Duration</label>\r\n");
      out.write("                                                        <div class=\"value\">\r\n");
      out.write("                                                            ");
      out.print( rs.getInt("HOURS") );
      out.write(" Hours\r\n");
      out.write("                                                        </div>\r\n");
      out.write("                                                    </div>\r\n");
      out.write("                                                    ");
 } 
      out.write("\r\n");
      out.write("                                    </div>\r\n");
      out.write("\r\n");
      out.write("                                    <div class=\"section-title\"><i class=\"fa-solid fa-file-invoice-dollar\"></i> Claim\r\n");
      out.write("                                        Summary</div>\r\n");
      out.write("                                    <div class=\"info-grid\">\r\n");
      out.write("                                        <div class=\"info-item\">\r\n");
      out.write("                                            <label>Amount Requested</label>\r\n");
      out.write("                                            <div class=\"value\" style=\"color: #2E3A8C; font-size: 1.2rem;\">\r\n");
      out.write("                                                RM ");
      out.print( String.format("%.2f", rs.getDouble("AMOUNT")) );
      out.write("\r\n");
      out.write("                                            </div>\r\n");
      out.write("                                        </div>\r\n");
      out.write("                                        <div class=\"info-item\">\r\n");
      out.write("                                            <label>Current Status</label>\r\n");
      out.write("                                            <div>\r\n");
      out.write("                                                <span class=\"status-badge status-");
      out.print( status );
      out.write("\">\r\n");
      out.write("                                                    ");
      out.print( status );
      out.write("\r\n");
      out.write("                                                </span>\r\n");
      out.write("                                            </div>\r\n");
      out.write("                                        </div>\r\n");
      out.write("                                        <div class=\"info-item full-width\">\r\n");
      out.write("                                            <label>Description / Remarks</label>\r\n");
      out.write("                                            <div class=\"value\" style=\"font-weight: normal; color: #555;\">\r\n");
      out.write("                                                ");
      out.print( rs.getString("CLAIM_DESC") !=null ? rs.getString("CLAIM_DESC")
                                                    : "No description provided." );
      out.write("\r\n");
      out.write("                                            </div>\r\n");
      out.write("                                        </div>\r\n");
      out.write("\r\n");
      out.write("                                        <div class=\"info-item full-width\">\r\n");
      out.write("                                            <label>Supporting Document</label>\r\n");
      out.write("                                            ");
 if (doc !=null && !doc.isEmpty()) { 
      out.write("\r\n");
      out.write("                                                <a href=\"DownloadServlet?filename=");
      out.print( doc );
      out.write("\" target=\"_blank\"\r\n");
      out.write("                                                    class=\"doc-link\">\r\n");
      out.write("                                                    <i class=\"fa-solid fa-paperclip\"></i> View Attachment\r\n");
      out.write("                                                </a>\r\n");
      out.write("                                                ");
 } else { 
      out.write("\r\n");
      out.write("                                                    <span style=\"color: #999; font-style: italic;\">No document\r\n");
      out.write("                                                        attached.</span>\r\n");
      out.write("                                                    ");
 } 
      out.write("\r\n");
      out.write("                                        </div>\r\n");
      out.write("                                    </div>\r\n");
      out.write("\r\n");
      out.write("                                    ");
 if ("SUBMITTED".equalsIgnoreCase(status)) { 
      out.write("\r\n");
      out.write("                                        <div class=\"action-bar\">\r\n");
      out.write("                                            <form action=\"ManagerActionServlet\" method=\"post\" style=\"display:inline;\">\r\n");
      out.write("                                                <input type=\"hidden\" name=\"submissionId\" value=\"");
      out.print( submissionId );
      out.write("\">\r\n");
      out.write("                                                <input type=\"hidden\" name=\"action\" value=\"approve\">\r\n");
      out.write("                                                <button type=\"submit\" class=\"btn btn-approve\">\r\n");
      out.write("                                                    <i class=\"fa-solid fa-check\"></i> Approve Claim\r\n");
      out.write("                                                </button>\r\n");
      out.write("                                            </form>\r\n");
      out.write("\r\n");
      out.write("                                            <form action=\"ManagerActionServlet\" method=\"post\" style=\"display:inline;\">\r\n");
      out.write("                                                <input type=\"hidden\" name=\"submissionId\" value=\"");
      out.print( submissionId );
      out.write("\">\r\n");
      out.write("                                                <input type=\"hidden\" name=\"action\" value=\"reject\">\r\n");
      out.write("                                                <button type=\"submit\" class=\"btn btn-reject\"\r\n");
      out.write("                                                    onclick=\"return confirm('Are you sure you want to REJECT this claim?');\">\r\n");
      out.write("                                                    <i class=\"fa-solid fa-xmark\"></i> Reject Claim\r\n");
      out.write("                                                </button>\r\n");
      out.write("                                            </form>\r\n");
      out.write("                                        </div>\r\n");
      out.write("                                        ");
 } 
      out.write("\r\n");
      out.write("\r\n");
      out.write("                                </div>\r\n");
      out.write("                                ");
 } } catch (Exception e) { e.printStackTrace(); 
      out.write("\r\n");
      out.write("                                    <p style=\"color:red; text-align:center;\">Error: ");
      out.print( e.getMessage() );
      out.write("\r\n");
      out.write("                                    </p>\r\n");
      out.write("                                    ");
 } finally { if (rs !=null) try { rs.close(); } catch (SQLException e) {} if (ps
                                        !=null) try { ps.close(); } catch (SQLException e) {} if (conn !=null) try {
                                        conn.close(); } catch (SQLException e) {} } 
      out.write("\r\n");
      out.write("                    </div>\r\n");
      out.write("\r\n");
      out.write("                </body>\r\n");
      out.write("\r\n");
      out.write("                </html>");
    } catch (java.lang.Throwable t) {
      if (!(t instanceof jakarta.servlet.jsp.SkipPageException)){
        out = _jspx_out;
        if (out != null && out.getBufferSize() != 0)
          try {
            if (response.isCommitted()) {
              out.flush();
            } else {
              out.clearBuffer();
            }
          } catch (java.io.IOException e) {}
        if (_jspx_page_context != null) _jspx_page_context.handlePageException(t);
        else throw new ServletException(t);
      }
    } finally {
      _jspxFactory.releasePageContext(_jspx_page_context);
    }
  }
}
