/*
 * Generated by the Jasper component of Apache Tomcat
 * Version: jetty/12.0.6
 * Generated at: 2026-01-20 16:04:43 UTC
 * Note: The last modified time of this file was set to
 *       the last modified time of the source file after
 *       generation to assist with modification tracking.
 */
package org.apache.jsp;

import jakarta.servlet.*;
import jakarta.servlet.http.*;
import jakarta.servlet.jsp.*;
import java.sql.*;
import model.Employee;

public final class UpdateClaim1_jsp extends org.apache.jasper.runtime.HttpJspBase
    implements org.apache.jasper.runtime.JspSourceDependent,
                 org.apache.jasper.runtime.JspSourceImports,
                 org.apache.jasper.runtime.JspSourceDirectives {

  private static final jakarta.servlet.jsp.JspFactory _jspxFactory =
          jakarta.servlet.jsp.JspFactory.getDefaultFactory();

  private static java.util.Map<java.lang.String,java.lang.Long> _jspx_dependants;

  private static final java.util.Set<java.lang.String> _jspx_imports_packages;

  private static final java.util.Set<java.lang.String> _jspx_imports_classes;

  static {
    _jspx_imports_packages = new java.util.HashSet<>();
    _jspx_imports_packages.add("java.sql");
    _jspx_imports_packages.add("jakarta.servlet");
    _jspx_imports_packages.add("jakarta.servlet.http");
    _jspx_imports_packages.add("jakarta.servlet.jsp");
    _jspx_imports_classes = new java.util.HashSet<>();
    _jspx_imports_classes.add("model.Employee");
  }

  private volatile jakarta.el.ExpressionFactory _el_expressionfactory;
  private volatile org.apache.tomcat.InstanceManager _jsp_instancemanager;

  public java.util.Map<java.lang.String,java.lang.Long> getDependants() {
    return _jspx_dependants;
  }

  public java.util.Set<java.lang.String> getPackageImports() {
    return _jspx_imports_packages;
  }

  public java.util.Set<java.lang.String> getClassImports() {
    return _jspx_imports_classes;
  }

  public boolean getErrorOnELNotFound() {
    return false;
  }

  public jakarta.el.ExpressionFactory _jsp_getExpressionFactory() {
    if (_el_expressionfactory == null) {
      synchronized (this) {
        if (_el_expressionfactory == null) {
          _el_expressionfactory = _jspxFactory.getJspApplicationContext(getServletConfig().getServletContext()).getExpressionFactory();
        }
      }
    }
    return _el_expressionfactory;
  }

  public org.apache.tomcat.InstanceManager _jsp_getInstanceManager() {
    if (_jsp_instancemanager == null) {
      synchronized (this) {
        if (_jsp_instancemanager == null) {
          _jsp_instancemanager = org.apache.jasper.runtime.InstanceManagerFactory.getInstanceManager(getServletConfig());
        }
      }
    }
    return _jsp_instancemanager;
  }

  public void _jspInit() {
  }

  public void _jspDestroy() {
  }

  public void _jspService(final jakarta.servlet.http.HttpServletRequest request, final jakarta.servlet.http.HttpServletResponse response)
      throws java.io.IOException, jakarta.servlet.ServletException {

    if (!jakarta.servlet.DispatcherType.ERROR.equals(request.getDispatcherType())) {
      final java.lang.String _jspx_method = request.getMethod();
      if ("OPTIONS".equals(_jspx_method)) {
        response.setHeader("Allow","GET, HEAD, POST, OPTIONS");
        return;
      }
      if (!"GET".equals(_jspx_method) && !"POST".equals(_jspx_method) && !"HEAD".equals(_jspx_method)) {
        response.setHeader("Allow","GET, HEAD, POST, OPTIONS");
        response.sendError(HttpServletResponse.SC_METHOD_NOT_ALLOWED, "JSPs only permit GET, POST or HEAD. Jasper also permits OPTIONS");
        return;
      }
    }

    final jakarta.servlet.jsp.PageContext pageContext;
    jakarta.servlet.http.HttpSession session = null;
    final jakarta.servlet.ServletContext application;
    final jakarta.servlet.ServletConfig config;
    jakarta.servlet.jsp.JspWriter out = null;
    final java.lang.Object page = this;
    jakarta.servlet.jsp.JspWriter _jspx_out = null;
    jakarta.servlet.jsp.PageContext _jspx_page_context = null;


    try {
      response.setContentType("text/html");
      pageContext = _jspxFactory.getPageContext(this, request, response,
      			null, true, 8192, true);
      _jspx_page_context = pageContext;
      application = pageContext.getServletContext();
      config = pageContext.getServletConfig();
      session = pageContext.getSession();
      out = pageContext.getOut();
      _jspx_out = out;

      out.write("\r\n");
      out.write("    \r\n");
      out.write("        \r\n");
      out.write("\r\n");
      out.write("            ");
 Employee emp=(Employee) session.getAttribute("employee"); if (emp==null) {
                response.sendRedirect("Login.jsp"); return; } String employeeId=emp.getEmpId(); String
                submissionId=request.getParameter("id"); if (submissionId==null) {
                response.sendRedirect("ViewClaim.jsp"); return; } String dbURL="jdbc:postgresql://localhost:5432/eems" ;
                String dbUser="postgres" ; String dbPass="oracle" ; Connection conn=null; PreparedStatement ps=null;
                ResultSet rs=null; 
      out.write("\r\n");
      out.write("\r\n");
      out.write("                <!DOCTYPE html>\r\n");
      out.write("                <html lang=\"en\">\r\n");
      out.write("\r\n");
      out.write("                <head>\r\n");
      out.write("                    <meta charset=\"UTF-8\">\r\n");
      out.write("                    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n");
      out.write("                    <title>Update Claim | EEMS</title>\r\n");
      out.write("                    <link rel=\"stylesheet\" href=\"CSS/UpdateClaim1.css\">\r\n");
      out.write("                    <link rel=\"stylesheet\"\r\n");
      out.write("                        href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css\">\r\n");
      out.write("                </head>\r\n");
      out.write("\r\n");
      out.write("                <body>\r\n");
      out.write("\r\n");
      out.write("                    <div class=\"page\">\r\n");
      out.write("                        <div class=\"header-container\">\r\n");
      out.write("                            <h2>Update Claim Details</h2>\r\n");
      out.write("                            <p>Review and modify your submission information below</p>\r\n");
      out.write("                        </div>\r\n");
      out.write("\r\n");
      out.write("                        ");
 try { Class.forName("org.postgresql.Driver"); conn=DriverManager.getConnection(dbURL, dbUser,
                            dbPass); String sql="SELECT s.*, " + "m.CLINICNAME, m.DIAGNOSIS, m.MRNDOCTOR, "
                            + "o.HOURS, o.STARTTIME, o.ENDTIME, "
                            + "t.MILEAGE, t.RATEPERKM, t.DEPARTUREDEST, t.ARRIVALDEST " + "FROM SUBMISSION s "
                            + "LEFT JOIN MEDICAL m ON s.SUBMISSIONID = m.SUBMISSIONID "
                            + "LEFT JOIN OVERTIME o ON s.SUBMISSIONID = o.SUBMISSIONID "
                            + "LEFT JOIN TRAVEL t ON s.SUBMISSIONID = t.SUBMISSIONID "
                            + "WHERE s.SUBMISSIONID = ? AND s.EMPLOYEEID = ?" ; ps=conn.prepareStatement(sql);
                            ps.setInt(1, Integer.parseInt(submissionId)); ps.setString(2, employeeId);
                            rs=ps.executeQuery(); if (!rs.next()) { 
      out.write("\r\n");
      out.write("                            <div class=\"card\" style=\"text-align: center; padding: 50px;\">\r\n");
      out.write("                                <i class=\"fa-solid fa-triangle-exclamation\"\r\n");
      out.write("                                    style=\"font-size: 40px; color: #ef4444; margin-bottom: 20px;\"></i>\r\n");
      out.write("                                <h3 style=\"color: #374151;\">Claim Not Found</h3>\r\n");
      out.write("                                <p style=\"color: #6b7280; margin-bottom: 20px;\">The claim does not exist or you cannot\r\n");
      out.write("                                    access it.</p>\r\n");
      out.write("                                <a href=\"ViewClaim.jsp\" class=\"btn btn-update\"\r\n");
      out.write("                                    style=\"display:inline-block; width:auto;\">Return to Dashboard</a>\r\n");
      out.write("                            </div>\r\n");
      out.write("                            ");
 } else { String type=rs.getString("CLAIMTYPE"); String status=rs.getString("STATUS");
                                String statusColor="DRAFT" .equalsIgnoreCase(status) ? "#d97706" : "#2563eb" ; String
                                startVal="" ; String endVal="" ; if (rs.getTimestamp("STARTTIME") !=null) {
                                startVal=rs.getTimestamp("STARTTIME").toString().substring(0, 10); } if
                                (rs.getTimestamp("ENDTIME") !=null) {
                                endVal=rs.getTimestamp("ENDTIME").toString().substring(0, 10); } 
      out.write("\r\n");
      out.write("\r\n");
      out.write("                                <div class=\"card\">\r\n");
      out.write("                                    <form action=\"SubmitClaim\" method=\"post\" enctype=\"multipart/form-data\">\r\n");
      out.write("\r\n");
      out.write("                                        <input type=\"hidden\" name=\"action\" value=\"update\">\r\n");
      out.write("                                        <input type=\"hidden\" name=\"submissionId\" value=\"");
      out.print( submissionId );
      out.write("\">\r\n");
      out.write("                                        <input type=\"hidden\" name=\"claimType\" value=\"");
      out.print( type );
      out.write("\">\r\n");
      out.write("\r\n");
      out.write("                                        <div class=\"form-section-title\">Submission Information</div>\r\n");
      out.write("\r\n");
      out.write("                                        <div class=\"form-grid\">\r\n");
      out.write("                                            <div class=\"form-group\">\r\n");
      out.write("                                                <label><i class=\"fa-solid fa-tag\"></i> Claim Type</label>\r\n");
      out.write("                                                <input type=\"text\" value=\"");
      out.print( type );
      out.write("\" readonly>\r\n");
      out.write("                                            </div>\r\n");
      out.write("\r\n");
      out.write("                                            <div class=\"form-group\">\r\n");
      out.write("                                                <label><i class=\"fa-solid fa-circle-info\"></i> Current Status</label>\r\n");
      out.write("                                                <input type=\"text\" value=\"");
      out.print( status );
      out.write("\" readonly\r\n");
      out.write("                                                    style=\"color: ");
      out.print( statusColor );
      out.write("; font-weight: bold;\">\r\n");
      out.write("                                            </div>\r\n");
      out.write("                                        </div>\r\n");
      out.write("\r\n");
      out.write("                                        <div class=\"form-section-title\">\r\n");
      out.write("                                            ");
      out.print( type );
      out.write(" Details\r\n");
      out.write("                                        </div>\r\n");
      out.write("\r\n");
      out.write("                                        ");
 if ("Overtime".equalsIgnoreCase(type)) { int hours=rs.getInt("HOURS"); 
      out.write("\r\n");
      out.write("                                            <div class=\"form-grid\">\r\n");
      out.write("                                                <div class=\"form-group\">\r\n");
      out.write("                                                    <label><i class=\"fa-regular fa-calendar\"></i> Start Date</label>\r\n");
      out.write("                                                    <input type=\"date\" name=\"startTime\" value=\"");
      out.print( startVal );
      out.write("\"\r\n");
      out.write("                                                        required>\r\n");
      out.write("                                                </div>\r\n");
      out.write("                                                <div class=\"form-group\">\r\n");
      out.write("                                                    <label><i class=\"fa-regular fa-calendar-check\"></i> End Date</label>\r\n");
      out.write("                                                    <input type=\"date\" name=\"endTime\" value=\"");
      out.print( endVal );
      out.write("\" required>\r\n");
      out.write("                                                </div>\r\n");
      out.write("                                                <div class=\"form-group full-width\">\r\n");
      out.write("                                                    <label><i class=\"fa-regular fa-clock\"></i> Hours per Day</label>\r\n");
      out.write("                                                    <select name=\"hours\">\r\n");
      out.write("                                                        <option value=\"1\" ");
      out.print(hours==1 ? "selected" : "" );
      out.write(">1 Hour\r\n");
      out.write("                                                        </option>\r\n");
      out.write("                                                        <option value=\"2\" ");
      out.print(hours==2 ? "selected" : "" );
      out.write(">2 Hours\r\n");
      out.write("                                                        </option>\r\n");
      out.write("                                                        <option value=\"3\" ");
      out.print(hours==3 ? "selected" : "" );
      out.write(">3 Hours\r\n");
      out.write("                                                        </option>\r\n");
      out.write("                                                        <option value=\"4\" ");
      out.print(hours==4 ? "selected" : "" );
      out.write(">4 Hours\r\n");
      out.write("                                                        </option>\r\n");
      out.write("                                                    </select>\r\n");
      out.write("                                                </div>\r\n");
      out.write("                                            </div>\r\n");
      out.write("                                            ");
 } else if ("Medical".equalsIgnoreCase(type)) { String
                                                clinicName=rs.getString("CLINICNAME"); String
                                                mrnDoctor=rs.getString("MRNDOCTOR"); String
                                                diagnosis=rs.getString("DIAGNOSIS"); 
      out.write("\r\n");
      out.write("                                                <div class=\"form-grid\">\r\n");
      out.write("                                                    <div class=\"form-group\">\r\n");
      out.write("                                                        <label><i class=\"fa-solid fa-hospital\"></i> Clinic Name</label>\r\n");
      out.write("                                                        <input type=\"text\" name=\"clinicName\" value=\"");
      out.print( clinicName );
      out.write("\"\r\n");
      out.write("                                                            required>\r\n");
      out.write("                                                    </div>\r\n");
      out.write("                                                    <div class=\"form-group\">\r\n");
      out.write("                                                        <label><i class=\"fa-solid fa-user-doctor\"></i> MRN\r\n");
      out.write("                                                            Doctor</label>\r\n");
      out.write("                                                        <input type=\"text\" name=\"mrnDoctor\" value=\"");
      out.print( mrnDoctor );
      out.write("\"\r\n");
      out.write("                                                            required>\r\n");
      out.write("                                                    </div>\r\n");
      out.write("                                                    <div class=\"form-group full-width\">\r\n");
      out.write("                                                        <label><i class=\"fa-solid fa-stethoscope\"></i> Diagnosis</label>\r\n");
      out.write("                                                        <select name=\"diagnosis\">\r\n");
      out.write("                                                            <option value=\"flu\" ");
      out.print("flu" .equals(diagnosis) ? "selected"
                                                                : "" );
      out.write(">Flu</option>\r\n");
      out.write("                                                            <option value=\"fever\" ");
      out.print("fever" .equals(diagnosis)
                                                                ? "selected" : "" );
      out.write(">Fever</option>\r\n");
      out.write("                                                            <option value=\"cough\" ");
      out.print("cough" .equals(diagnosis)
                                                                ? "selected" : "" );
      out.write(">Cough</option>\r\n");
      out.write("                                                            <option value=\"others\" ");
      out.print("others" .equals(diagnosis)
                                                                ? "selected" : "" );
      out.write(">Others</option>\r\n");
      out.write("                                                        </select>\r\n");
      out.write("                                                    </div>\r\n");
      out.write("                                                </div>\r\n");
      out.write("                                                ");
 } else if ("Travel".equalsIgnoreCase(type)) { String
                                                    departureDest=rs.getString("DEPARTUREDEST"); String
                                                    arrivalDest=rs.getString("ARRIVALDEST"); double
                                                    mileage=rs.getDouble("MILEAGE"); double
                                                    ratePerKm=rs.getDouble("RATEPERKM"); 
      out.write("\r\n");
      out.write("                                                    <div class=\"form-grid\">\r\n");
      out.write("                                                        <div class=\"form-group\">\r\n");
      out.write("                                                            <label><i class=\"fa-solid fa-plane-departure\"></i>\r\n");
      out.write("                                                                Departure</label>\r\n");
      out.write("                                                            <input type=\"text\" name=\"departureDest\"\r\n");
      out.write("                                                                value=\"");
      out.print( departureDest );
      out.write("\" required>\r\n");
      out.write("                                                        </div>\r\n");
      out.write("                                                        <div class=\"form-group\">\r\n");
      out.write("                                                            <label><i class=\"fa-solid fa-plane-arrival\"></i>\r\n");
      out.write("                                                                Arrival</label>\r\n");
      out.write("                                                            <select name=\"arrivalDest\">\r\n");
      out.write("                                                                <option value=\"Ayer Keroh\" ");
      out.print("Ayer Keroh"
                                                                    .equals(arrivalDest) ? "selected" : "" );
      out.write(">Ayer Keroh\r\n");
      out.write("                                                                </option>\r\n");
      out.write("                                                                <option value=\"Kajang\" ");
      out.print("Kajang" .equals(arrivalDest)
                                                                    ? "selected" : "" );
      out.write(">Kajang</option>\r\n");
      out.write("                                                                <option value=\"Simpang Ampat\" ");
      out.print("Simpang Ampat"
                                                                    .equals(arrivalDest) ? "selected" : "" );
      out.write(">Simpang\r\n");
      out.write("                                                                    Ampat</option>\r\n");
      out.write("                                                                <option value=\"Petaling Jaya\" ");
      out.print("Petaling Jaya"
                                                                    .equals(arrivalDest) ? "selected" : "" );
      out.write(">Petaling\r\n");
      out.write("                                                                    Jaya</option>\r\n");
      out.write("                                                            </select>\r\n");
      out.write("                                                        </div>\r\n");
      out.write("                                                        <div class=\"form-group\">\r\n");
      out.write("                                                            <label><i class=\"fa-solid fa-road\"></i> Mileage (KM)</label>\r\n");
      out.write("                                                            <input type=\"number\" name=\"mileage\" step=\"0.1\"\r\n");
      out.write("                                                                value=\"");
      out.print( mileage );
      out.write("\">\r\n");
      out.write("                                                        </div>\r\n");
      out.write("                                                        <div class=\"form-group\">\r\n");
      out.write("                                                            <label><i class=\"fa-solid fa-coins\"></i> Rate Per KM</label>\r\n");
      out.write("                                                            <input type=\"number\" name=\"ratePerKm\" step=\"0.01\"\r\n");
      out.write("                                                                value=\"");
      out.print( ratePerKm );
      out.write("\">\r\n");
      out.write("                                                        </div>\r\n");
      out.write("                                                    </div>\r\n");
      out.write("                                                    ");
 } double amount=rs.getDouble("AMOUNT"); String
                                                        claimDesc=rs.getString("CLAIM_DESC"); String
                                                        doc=rs.getString("DOCUMENT_PATH"); 
      out.write("\r\n");
      out.write("\r\n");
      out.write("                                                        <div class=\"form-section-title\">Claim Summary</div>\r\n");
      out.write("\r\n");
      out.write("                                                        <div class=\"form-group\">\r\n");
      out.write("                                                            <label><i class=\"fa-solid fa-money-bill-wave\"></i> Total\r\n");
      out.write("                                                                Amount (RM)</label>\r\n");
      out.write("                                                            <input type=\"number\" name=\"amount\" step=\"0.01\"\r\n");
      out.write("                                                                value=\"");
      out.print( amount );
      out.write("\" required\r\n");
      out.write("                                                                style=\"font-size: 18px; font-weight: bold; color: #111827;\">\r\n");
      out.write("                                                        </div>\r\n");
      out.write("\r\n");
      out.write("                                                        <div class=\"form-group\">\r\n");
      out.write("                                                            <label><i class=\"fa-solid fa-align-left\"></i>\r\n");
      out.write("                                                                Description</label>\r\n");
      out.write("                                                            <textarea name=\"description\"\r\n");
      out.write("                                                                placeholder=\"Enter details...\">");
      out.print( claimDesc != null ? claimDesc : "" );
      out.write("</textarea>\r\n");
      out.write("                                                        </div>\r\n");
      out.write("\r\n");
      out.write("                                                        <div class=\"form-group file-upload-box\">\r\n");
      out.write("                                                            <label style=\"margin-bottom: 15px;\"><i\r\n");
      out.write("                                                                    class=\"fa-solid fa-paperclip\"></i> Supporting\r\n");
      out.write("                                                                Document</label>\r\n");
      out.write("                                                            ");
 if (doc !=null && !doc.isEmpty()) { 
      out.write("\r\n");
      out.write("                                                                <div style=\"margin-bottom: 10px;\">\r\n");
      out.write("                                                                    <a href=\"DownloadServlet?filename=");
      out.print( doc );
      out.write("\"\r\n");
      out.write("                                                                        target=\"_blank\"\r\n");
      out.write("                                                                        style=\"color: blue; text-decoration: underline;\">\r\n");
      out.write("                                                                        <i class=\"fa-regular fa-file-pdf\"></i> View\r\n");
      out.write("                                                                        Current Document\r\n");
      out.write("                                                                    </a>\r\n");
      out.write("                                                                </div>\r\n");
      out.write("                                                                ");
 } else { 
      out.write("\r\n");
      out.write("                                                                    <p\r\n");
      out.write("                                                                        style=\"color: #9ca3af; font-size: 13px; margin-bottom: 10px;\">\r\n");
      out.write("                                                                        No document currently uploaded</p>\r\n");
      out.write("                                                                    ");
 } 
      out.write("\r\n");
      out.write("                                                                        <input type=\"file\" name=\"document\"\r\n");
      out.write("                                                                            id=\"uploadFile\">\r\n");
      out.write("                                                        </div>\r\n");
      out.write("\r\n");
      out.write("                                                        <div class=\"button-group\">\r\n");
      out.write("                                                            <a href=\"ViewClaim.jsp\" class=\"btn btn-cancel\">Cancel</a>\r\n");
      out.write("                                                            <button type=\"submit\" class=\"btn btn-update\">\r\n");
      out.write("                                                                <i class=\"fa-solid fa-floppy-disk\"\r\n");
      out.write("                                                                    style=\"margin-right:8px;\"></i> Save Changes\r\n");
      out.write("                                                            </button>\r\n");
      out.write("                                                        </div>\r\n");
      out.write("                                    </form>\r\n");
      out.write("                                </div>\r\n");
      out.write("                                ");
 } } catch (Exception e) { e.printStackTrace(); 
      out.write("\r\n");
      out.write("                                    <div class=\"card\" style=\"border-left: 5px solid red;\">\r\n");
      out.write("                                        <h3>System Error</h3>\r\n");
      out.write("                                        <p>\r\n");
      out.write("                                            ");
      out.print( e.getMessage() );
      out.write("\r\n");
      out.write("                                        </p>\r\n");
      out.write("                                        <a href=\"ViewClaim.jsp\">Back</a>\r\n");
      out.write("                                    </div>\r\n");
      out.write("                                    ");
 } finally { if (rs !=null) try { rs.close(); } catch (SQLException e) {} if (ps
                                        !=null) try { ps.close(); } catch (SQLException e) {} if (conn !=null) try {
                                        conn.close(); } catch (SQLException e) {} } 
      out.write("\r\n");
      out.write("                    </div>\r\n");
      out.write("                </body>\r\n");
      out.write("\r\n");
      out.write("                </html>");
    } catch (java.lang.Throwable t) {
      if (!(t instanceof jakarta.servlet.jsp.SkipPageException)){
        out = _jspx_out;
        if (out != null && out.getBufferSize() != 0)
          try {
            if (response.isCommitted()) {
              out.flush();
            } else {
              out.clearBuffer();
            }
          } catch (java.io.IOException e) {}
        if (_jspx_page_context != null) _jspx_page_context.handlePageException(t);
        else throw new ServletException(t);
      }
    } finally {
      _jspxFactory.releasePageContext(_jspx_page_context);
    }
  }
}
